# 37_請求ステータス変更（A05_27）

## 機能概要

顧客への請求ステータスを変更する機能です。請求済み・未請求のステータス管理を行います。

## 実装状況

**未実装（保留）**

## 備考

### 将来の実装予定

本機能は現在未実装（保留）です。将来的には以下の機能を実装する予定です：

#### 想定される機能

1. **請求ステータス管理**
   - 未請求（UNBILLED）
   - 請求書発行済み（ISSUED）
   - 入金済み（PAID）
   - 保留（HOLD）

2. **一括ステータス変更**
   - 複数の顧客請求を一括でステータス変更
   - 月次単位でのステータス管理

3. **請求履歴記録**
   - 請求書発行日時の記録
   - 請求担当者の記録
   - 入金日時の記録

4. **関連テーブル**
   - `customer_monthly_invoices` テーブルに `status` カラムが存在
   - 将来の拡張に備えた設計

#### 現在の代替運用

現在は以下の方法で運用されています：

1. **承認済みタスクによる請求管理**
   - 承認済みタスクを請求対象として扱う
   - 承認日時（approved_at）で請求対象を判断

2. **請求サマリー表示**
   - 請求サマリー画面（39_請求サマリー表示.md）で顧客への請求額を確認
   - 手動で請求状況を管理

3. **外部システム連携**
   - 会計システムとの連携は別途手動で実施

### 実装時の考慮事項

将来実装する際には以下を考慮する必要があります：

1. **データモデル**
   - `customer_monthly_invoices.status` カラムの活用
   - 請求履歴テーブルの追加検討
   - 入金履歴テーブルの追加検討

2. **権限管理**
   - 請求ステータス変更権限の設計
   - 承認フローの追加検討

3. **監査ログ**
   - ステータス変更履歴の記録
   - 変更理由の記録

4. **画面設計**
   - 請求一覧画面の追加
   - ステータス変更画面の追加
   - 一括変更機能の実装
   - 入金管理画面の追加

5. **外部システム連携**
   - 会計システムとのAPI連携
   - 請求データのエクスポート機能
   - 入金データのインポート機能

6. **請求書発行との連携**
   - 秘書による請求書発行機能との統合
   - ステータスの自動更新

### 関連機能

- **請求サマリー表示** (39_請求サマリー表示.md): 顧客への請求額集計表示
- **業務承認** (32_業務承認.md): 請求対象タスクの承認
- **業務一覧表示** (30_業務一覧表示.md): 承認済みタスクの確認
